(function(global,factory){typeof exports==='object'&&typeof module!=='undefined'?module.exports=factory():typeof define==='function'&&define.amd?define(factory):(global.weappCookie=factory())}(this,(function(){'use strict';function unwrapExports(x){return x&&x.__esModule&&Object.prototype.hasOwnProperty.call(x,'default')?x['default']:x}function createCommonjsModule(fn,module){return module={exports:{}},fn(module,module.exports),module.exports}var _global=createCommonjsModule(function(module){var global=module.exports=typeof window!='undefined'&&window.Math==Math?window:typeof self!='undefined'&&self.Math==Math?self:Function('return this')();if(typeof __g=='number')__g=global});var _core=createCommonjsModule(function(module){var core=module.exports={version:'2.5.7'};if(typeof __e=='number')__e=core});var _aFunction=function(it){if(typeof it!='function')throw TypeError(it+' is not a function!');return it};var _ctx=function(fn,that,length){_aFunction(fn);if(that===undefined)return fn;switch(length){case 1:return function(a){return fn.call(that,a)};case 2:return function(a,b){return fn.call(that,a,b)};case 3:return function(a,b,c){return fn.call(that,a,b,c)}}return function(){return fn.apply(that,arguments)}};var _isObject=function(it){return typeof it==='object'?it!==null:typeof it==='function'};var _anObject=function(it){if(!_isObject(it))throw TypeError(it+' is not an object!');return it};var _fails=function(exec){try{return!!exec()}catch(e){return true}};var _descriptors=!_fails(function(){return Object.defineProperty({},'a',{get:function(){return 7}}).a!=7});var document=_global.document;var is=_isObject(document)&&_isObject(document.createElement);var _domCreate=function(it){return is?document.createElement(it):{}};var _ie8DomDefine=!_descriptors&&!_fails(function(){return Object.defineProperty(_domCreate('div'),'a',{get:function(){return 7}}).a!=7});var _toPrimitive=function(it,S){if(!_isObject(it))return it;var fn,val;if(S&&typeof(fn=it.toString)=='function'&&!_isObject(val=fn.call(it)))return val;if(typeof(fn=it.valueOf)=='function'&&!_isObject(val=fn.call(it)))return val;if(!S&&typeof(fn=it.toString)=='function'&&!_isObject(val=fn.call(it)))return val;throw TypeError("Can't convert object to primitive value");};var dP=Object.defineProperty;var f=_descriptors?Object.defineProperty:function defineProperty(O,P,Attributes){_anObject(O);P=_toPrimitive(P,true);_anObject(Attributes);if(_ie8DomDefine)try{return dP(O,P,Attributes)}catch(e){}if('get'in Attributes||'set'in Attributes)throw TypeError('Accessors not supported!');if('value'in Attributes)O[P]=Attributes.value;return O};var _objectDp={f:f};var _propertyDesc=function(bitmap,value){return{enumerable:!(bitmap&1),configurable:!(bitmap&2),writable:!(bitmap&4),value:value}};var _hide=_descriptors?function(object,key,value){return _objectDp.f(object,key,_propertyDesc(1,value))}:function(object,key,value){object[key]=value;return object};var hasOwnProperty={}.hasOwnProperty;var _has=function(it,key){return hasOwnProperty.call(it,key)};var PROTOTYPE='prototype';var $export=function(type,name,source){var IS_FORCED=type&$export.F;var IS_GLOBAL=type&$export.G;var IS_STATIC=type&$export.S;var IS_PROTO=type&$export.P;var IS_BIND=type&$export.B;var IS_WRAP=type&$export.W;var exports=IS_GLOBAL?_core:_core[name]||(_core[name]={});var expProto=exports[PROTOTYPE];var target=IS_GLOBAL?_global:IS_STATIC?_global[name]:(_global[name]||{})[PROTOTYPE];var key,own,out;if(IS_GLOBAL)source=name;for(key in source){own=!IS_FORCED&&target&&target[key]!==undefined;if(own&&_has(exports,key))continue;out=own?target[key]:source[key];exports[key]=IS_GLOBAL&&typeof target[key]!='function'?source[key]:IS_BIND&&own?_ctx(out,_global):IS_WRAP&&target[key]==out?(function(C){var F=function(a,b,c){if(this instanceof C){switch(arguments.length){case 0:return new C();case 1:return new C(a);case 2:return new C(a,b)}return new C(a,b,c)}return C.apply(this,arguments)};F[PROTOTYPE]=C[PROTOTYPE];return F})(out):IS_PROTO&&typeof out=='function'?_ctx(Function.call,out):out;if(IS_PROTO){(exports.virtual||(exports.virtual={}))[key]=out;if(type&$export.R&&expProto&&!expProto[key])_hide(expProto,key,out)}}};$export.F=1;$export.G=2;$export.S=4;$export.P=8;$export.B=16;$export.W=32;$export.U=64;$export.R=128;var _export=$export;_export(_export.S+_export.F*!_descriptors,'Object',{defineProperty:_objectDp.f});var $Object=_core.Object;var defineProperty$1=function defineProperty(it,key,desc){return $Object.defineProperty(it,key,desc)};var defineProperty=createCommonjsModule(function(module){module.exports={"default":defineProperty$1,__esModule:true}});var _Object$defineProperty=unwrapExports(defineProperty);var toString={}.toString;var _cof=function(it){return toString.call(it).slice(8,-1)};var _iobject=Object('z').propertyIsEnumerable(0)?Object:function(it){return _cof(it)=='String'?it.split(''):Object(it)};var _defined=function(it){if(it==undefined)throw TypeError("Can't call method on  "+it);return it};var _toIobject=function(it){return _iobject(_defined(it))};var ceil=Math.ceil;var floor=Math.floor;var _toInteger=function(it){return isNaN(it=+it)?0:(it>0?floor:ceil)(it)};var min=Math.min;var _toLength=function(it){return it>0?min(_toInteger(it),0x1fffffffffffff):0};var max=Math.max;var min$1=Math.min;var _toAbsoluteIndex=function(index,length){index=_toInteger(index);return index<0?max(index+length,0):min$1(index,length)};var _arrayIncludes=function(IS_INCLUDES){return function($this,el,fromIndex){var O=_toIobject($this);var length=_toLength(O.length);var index=_toAbsoluteIndex(fromIndex,length);var value;if(IS_INCLUDES&&el!=el)while(length>index){value=O[index++];if(value!=value)return true}else for(;length>index;index++)if(IS_INCLUDES||index in O){if(O[index]===el)return IS_INCLUDES||index||0}return!IS_INCLUDES&&-1}};var _library=true;var _shared=createCommonjsModule(function(module){var SHARED='__core-js_shared__';var store=_global[SHARED]||(_global[SHARED]={});(module.exports=function(key,value){return store[key]||(store[key]=value!==undefined?value:{})})('versions',[]).push({version:_core.version,mode:_library?'pure':'global',copyright:'© 2018 Denis Pushkarev (zloirock.ru)'})});var id=0;var px=Math.random();var _uid=function(key){return'Symbol('.concat(key===undefined?'':key,')_',(++id+px).toString(36))};var shared=_shared('keys');var _sharedKey=function(key){return shared[key]||(shared[key]=_uid(key))};var arrayIndexOf=_arrayIncludes(false);var IE_PROTO=_sharedKey('IE_PROTO');var _objectKeysInternal=function(object,names){var O=_toIobject(object);var i=0;var result=[];var key;for(key in O)if(key!=IE_PROTO)_has(O,key)&&result.push(key);while(names.length>i)if(_has(O,key=names[i++])){~arrayIndexOf(result,key)||result.push(key)}return result};var _enumBugKeys=('constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf').split(',');var _objectKeys=Object.keys||function keys(O){return _objectKeysInternal(O,_enumBugKeys)};var f$1=Object.getOwnPropertySymbols;var _objectGops={f:f$1};var f$2={}.propertyIsEnumerable;var _objectPie={f:f$2};var _toObject=function(it){return Object(_defined(it))};'use strict';var $assign=Object.assign;var _objectAssign=!$assign||_fails(function(){var A={};var B={};var S=Symbol();var K='abcdefghijklmnopqrst';A[S]=7;K.split('').forEach(function(k){B[k]=k});return $assign({},A)[S]!=7||Object.keys($assign({},B)).join('')!=K})?function assign(target,source){var T=_toObject(target);var aLen=arguments.length;var index=1;var getSymbols=_objectGops.f;var isEnum=_objectPie.f;while(aLen>index){var S=_iobject(arguments[index++]);var keys=getSymbols?_objectKeys(S).concat(getSymbols(S)):_objectKeys(S);var length=keys.length;var j=0;var key;while(length>j)if(isEnum.call(S,key=keys[j++]))T[key]=S[key]}return T}:$assign;_export(_export.S+_export.F,'Object',{assign:_objectAssign});var assign$1=_core.Object.assign;var assign=createCommonjsModule(function(module){module.exports={"default":assign$1,__esModule:true}});var _Object$assign=unwrapExports(assign);var _objectDps=_descriptors?Object.defineProperties:function defineProperties(O,Properties){_anObject(O);var keys=_objectKeys(Properties);var length=keys.length;var i=0;var P;while(length>i)_objectDp.f(O,P=keys[i++],Properties[P]);return O};_export(_export.S+_export.F*!_descriptors,'Object',{defineProperties:_objectDps});var $Object$1=_core.Object;var defineProperties$1=function defineProperties(T,D){return $Object$1.defineProperties(T,D)};var defineProperties=createCommonjsModule(function(module){module.exports={"default":defineProperties$1,__esModule:true}});var _Object$defineProperties=unwrapExports(defineProperties);var _addToUnscopables=function(){};var _iterStep=function(done,value){return{value:value,done:!!done}};var _iterators={};var _redefine=_hide;var document$1=_global.document;var _html=document$1&&document$1.documentElement;var IE_PROTO$1=_sharedKey('IE_PROTO');var Empty=function(){};var PROTOTYPE$1='prototype';var createDict=function(){var iframe=_domCreate('iframe');var i=_enumBugKeys.length;var lt='<';var gt='>';var iframeDocument;iframe.style.display='none';_html.appendChild(iframe);iframe.src='javascript:';iframeDocument=iframe.contentWindow.document;iframeDocument.open();iframeDocument.write(lt+'script'+gt+'document.F=Object'+lt+'/script'+gt);iframeDocument.close();createDict=iframeDocument.F;while(i--)delete createDict[PROTOTYPE$1][_enumBugKeys[i]];return createDict()};var _objectCreate=Object.create||function create(O,Properties){var result;if(O!==null){Empty[PROTOTYPE$1]=_anObject(O);result=new Empty();Empty[PROTOTYPE$1]=null;result[IE_PROTO$1]=O}else result=createDict();return Properties===undefined?result:_objectDps(result,Properties)};var _wks=createCommonjsModule(function(module){var store=_shared('wks');var Symbol=_global.Symbol;var USE_SYMBOL=typeof Symbol=='function';var $exports=module.exports=function(name){return store[name]||(store[name]=USE_SYMBOL&&Symbol[name]||(USE_SYMBOL?Symbol:_uid)('Symbol.'+name))};$exports.store=store});var def=_objectDp.f;var TAG=_wks('toStringTag');var _setToStringTag=function(it,tag,stat){if(it&&!_has(it=stat?it:it.prototype,TAG))def(it,TAG,{configurable:true,value:tag})};'use strict';var IteratorPrototype={};_hide(IteratorPrototype,_wks('iterator'),function(){return this});var _iterCreate=function(Constructor,NAME,next){Constructor.prototype=_objectCreate(IteratorPrototype,{next:_propertyDesc(1,next)});_setToStringTag(Constructor,NAME+' Iterator')};var IE_PROTO$2=_sharedKey('IE_PROTO');var ObjectProto=Object.prototype;var _objectGpo=Object.getPrototypeOf||function(O){O=_toObject(O);if(_has(O,IE_PROTO$2))return O[IE_PROTO$2];if(typeof O.constructor=='function'&&O instanceof O.constructor){return O.constructor.prototype}return O instanceof Object?ObjectProto:null};'use strict';var ITERATOR=_wks('iterator');var BUGGY=!([].keys&&'next'in[].keys());var FF_ITERATOR='@@iterator';var KEYS='keys';var VALUES='values';var returnThis=function(){return this};var _iterDefine=function(Base,NAME,Constructor,next,DEFAULT,IS_SET,FORCED){_iterCreate(Constructor,NAME,next);var getMethod=function(kind){if(!BUGGY&&kind in proto)return proto[kind];switch(kind){case KEYS:return function keys(){return new Constructor(this,kind)};case VALUES:return function values(){return new Constructor(this,kind)}}return function entries(){return new Constructor(this,kind)}};var TAG=NAME+' Iterator';var DEF_VALUES=DEFAULT==VALUES;var VALUES_BUG=false;var proto=Base.prototype;var $native=proto[ITERATOR]||proto[FF_ITERATOR]||DEFAULT&&proto[DEFAULT];var $default=$native||getMethod(DEFAULT);var $entries=DEFAULT?!DEF_VALUES?$default:getMethod('entries'):undefined;var $anyNative=NAME=='Array'?proto.entries||$native:$native;var methods,key,IteratorPrototype;if($anyNative){IteratorPrototype=_objectGpo($anyNative.call(new Base()));if(IteratorPrototype!==Object.prototype&&IteratorPrototype.next){_setToStringTag(IteratorPrototype,TAG,true);if(!_library&&typeof IteratorPrototype[ITERATOR]!='function')_hide(IteratorPrototype,ITERATOR,returnThis)}}if(DEF_VALUES&&$native&&$native.name!==VALUES){VALUES_BUG=true;$default=function values(){return $native.call(this)}}if((!_library||FORCED)&&(BUGGY||VALUES_BUG||!proto[ITERATOR])){_hide(proto,ITERATOR,$default)}_iterators[NAME]=$default;_iterators[TAG]=returnThis;if(DEFAULT){methods={values:DEF_VALUES?$default:getMethod(VALUES),keys:IS_SET?$default:getMethod(KEYS),entries:$entries};if(FORCED)for(key in methods){if(!(key in proto))_redefine(proto,key,methods[key])}else _export(_export.P+_export.F*(BUGGY||VALUES_BUG),NAME,methods)}return methods};'use strict';var es6_array_iterator=_iterDefine(Array,'Array',function(iterated,kind){this._t=_toIobject(iterated);this._i=0;this._k=kind},function(){var O=this._t;var kind=this._k;var index=this._i++;if(!O||index>=O.length){this._t=undefined;return _iterStep(1)}if(kind=='keys')return _iterStep(0,index);if(kind=='values')return _iterStep(0,O[index]);return _iterStep(0,[index,O[index]])},'values');_iterators.Arguments=_iterators.Array;_addToUnscopables('keys');_addToUnscopables('values');_addToUnscopables('entries');var TO_STRING_TAG=_wks('toStringTag');var DOMIterables=('CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,'+'DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,'+'MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,'+'SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,'+'TextTrackList,TouchList').split(',');for(var i=0;i<DOMIterables.length;i++){var NAME=DOMIterables[i];var Collection=_global[NAME];var proto=Collection&&Collection.prototype;if(proto&&!proto[TO_STRING_TAG])_hide(proto,TO_STRING_TAG,NAME);_iterators[NAME]=_iterators.Array}var _stringAt=function(TO_STRING){return function(that,pos){var s=String(_defined(that));var i=_toInteger(pos);var l=s.length;var a,b;if(i<0||i>=l)return TO_STRING?'':undefined;a=s.charCodeAt(i);return a<0xd800||a>0xdbff||i+1===l||(b=s.charCodeAt(i+1))<0xdc00||b>0xdfff?TO_STRING?s.charAt(i):a:TO_STRING?s.slice(i,i+2):(a-0xd800<<10)+(b-0xdc00)+0x10000}};'use strict';var $at=_stringAt(true);_iterDefine(String,'String',function(iterated){this._t=String(iterated);this._i=0},function(){var O=this._t;var index=this._i;var point;if(index>=O.length)return{value:undefined,done:true};point=$at(O,index);this._i+=point.length;return{value:point,done:false}});var TAG$1=_wks('toStringTag');var ARG=_cof(function(){return arguments}())=='Arguments';var tryGet=function(it,key){try{return it[key]}catch(e){}};var _classof=function(it){var O,T,B;return it===undefined?'Undefined':it===null?'Null':typeof(T=tryGet(O=Object(it),TAG$1))=='string'?T:ARG?_cof(O):(B=_cof(O))=='Object'&&typeof O.callee=='function'?'Arguments':B};var ITERATOR$1=_wks('iterator');var core_isIterable=_core.isIterable=function(it){var O=Object(it);return O[ITERATOR$1]!==undefined||'@@iterator'in O||_iterators.hasOwnProperty(_classof(O))};var isIterable$2=core_isIterable;var isIterable=createCommonjsModule(function(module){module.exports={"default":isIterable$2,__esModule:true}});unwrapExports(isIterable);var ITERATOR$2=_wks('iterator');var core_getIteratorMethod=_core.getIteratorMethod=function(it){if(it!=undefined)return it[ITERATOR$2]||it['@@iterator']||_iterators[_classof(it)]};var core_getIterator=_core.getIterator=function(it){var iterFn=core_getIteratorMethod(it);if(typeof iterFn!='function')throw TypeError(it+' is not iterable!');return _anObject(iterFn.call(it))};var getIterator$1=core_getIterator;var getIterator=createCommonjsModule(function(module){module.exports={"default":getIterator$1,__esModule:true}});var _getIterator=unwrapExports(getIterator);var slicedToArray=createCommonjsModule(function(module,exports){"use strict";exports.__esModule=true;var _isIterable3=_interopRequireDefault(isIterable);var _getIterator3=_interopRequireDefault(getIterator);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=(0,_getIterator3.default)(arr),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"])_i["return"]()}finally{if(_d)throw _e;}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if((0,_isIterable3.default)(Object(arr))){return sliceIterator(arr,i)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance");}}}()});var _slicedToArray=unwrapExports(slicedToArray);var _redefineAll=function(target,src,safe){for(var key in src){if(safe&&target[key])target[key]=src[key];else _hide(target,key,src[key])}return target};var _anInstance=function(it,Constructor,name,forbiddenField){if(!(it instanceof Constructor)||(forbiddenField!==undefined&&forbiddenField in it)){throw TypeError(name+': incorrect invocation!');}return it};var _iterCall=function(iterator,fn,value,entries){try{return entries?fn(_anObject(value)[0],value[1]):fn(value)}catch(e){var ret=iterator['return'];if(ret!==undefined)_anObject(ret.call(iterator));throw e;}};var ITERATOR$3=_wks('iterator');var ArrayProto=Array.prototype;var _isArrayIter=function(it){return it!==undefined&&(_iterators.Array===it||ArrayProto[ITERATOR$3]===it)};var _forOf=createCommonjsModule(function(module){var BREAK={};var RETURN={};var exports=module.exports=function(iterable,entries,fn,that,ITERATOR){var iterFn=ITERATOR?function(){return iterable}:core_getIteratorMethod(iterable);var f=_ctx(fn,that,entries?2:1);var index=0;var length,step,iterator,result;if(typeof iterFn!='function')throw TypeError(iterable+' is not iterable!');if(_isArrayIter(iterFn))for(length=_toLength(iterable.length);length>index;index++){result=entries?f(_anObject(step=iterable[index])[0],step[1]):f(iterable[index]);if(result===BREAK||result===RETURN)return result}else for(iterator=iterFn.call(iterable);!(step=iterator.next()).done;){result=_iterCall(iterator,f,step.value,entries);if(result===BREAK||result===RETURN)return result}};exports.BREAK=BREAK;exports.RETURN=RETURN});'use strict';var SPECIES=_wks('species');var _setSpecies=function(KEY){var C=typeof _core[KEY]=='function'?_core[KEY]:_global[KEY];if(_descriptors&&C&&!C[SPECIES])_objectDp.f(C,SPECIES,{configurable:true,get:function(){return this}})};var _meta=createCommonjsModule(function(module){var META=_uid('meta');var setDesc=_objectDp.f;var id=0;var isExtensible=Object.isExtensible||function(){return true};var FREEZE=!_fails(function(){return isExtensible(Object.preventExtensions({}))});var setMeta=function(it){setDesc(it,META,{value:{i:'O'+ ++id,w:{}}})};var fastKey=function(it,create){if(!_isObject(it))return typeof it=='symbol'?it:(typeof it=='string'?'S':'P')+it;if(!_has(it,META)){if(!isExtensible(it))return'F';if(!create)return'E';setMeta(it)}return it[META].i};var getWeak=function(it,create){if(!_has(it,META)){if(!isExtensible(it))return true;if(!create)return false;setMeta(it)}return it[META].w};var onFreeze=function(it){if(FREEZE&&meta.NEED&&isExtensible(it)&&!_has(it,META))setMeta(it);return it};var meta=module.exports={KEY:META,NEED:false,fastKey:fastKey,getWeak:getWeak,onFreeze:onFreeze}});var _validateCollection=function(it,TYPE){if(!_isObject(it)||it._t!==TYPE)throw TypeError('Incompatible receiver, '+TYPE+' required!');return it};'use strict';var dP$1=_objectDp.f;var fastKey=_meta.fastKey;var SIZE=_descriptors?'_s':'size';var getEntry=function(that,key){var index=fastKey(key);var entry;if(index!=='F')return that._i[index];for(entry=that._f;entry;entry=entry.n){if(entry.k==key)return entry}};var _collectionStrong={getConstructor:function(wrapper,NAME,IS_MAP,ADDER){var C=wrapper(function(that,iterable){_anInstance(that,C,NAME,'_i');that._t=NAME;that._i=_objectCreate(null);that._f=undefined;that._l=undefined;that[SIZE]=0;if(iterable!=undefined)_forOf(iterable,IS_MAP,that[ADDER],that)});_redefineAll(C.prototype,{clear:function clear(){for(var that=_validateCollection(this,NAME),data=that._i,entry=that._f;entry;entry=entry.n){entry.r=true;if(entry.p)entry.p=entry.p.n=undefined;delete data[entry.i]}that._f=that._l=undefined;that[SIZE]=0},'delete':function(key){var that=_validateCollection(this,NAME);var entry=getEntry(that,key);if(entry){var next=entry.n;var prev=entry.p;delete that._i[entry.i];entry.r=true;if(prev)prev.n=next;if(next)next.p=prev;if(that._f==entry)that._f=next;if(that._l==entry)that._l=prev;that[SIZE]--}return!!entry},forEach:function forEach(callbackfn){_validateCollection(this,NAME);var f=_ctx(callbackfn,arguments.length>1?arguments[1]:undefined,3);var entry;while(entry=entry?entry.n:this._f){f(entry.v,entry.k,this);while(entry&&entry.r)entry=entry.p}},has:function has(key){return!!getEntry(_validateCollection(this,NAME),key)}});if(_descriptors)dP$1(C.prototype,'size',{get:function(){return _validateCollection(this,NAME)[SIZE]}});return C},def:function(that,key,value){var entry=getEntry(that,key);var prev,index;if(entry){entry.v=value}else{that._l=entry={i:index=fastKey(key,true),k:key,v:value,p:prev=that._l,n:undefined,r:false};if(!that._f)that._f=entry;if(prev)prev.n=entry;that[SIZE]++;if(index!=='F')that._i[index]=entry}return that},getEntry:getEntry,setStrong:function(C,NAME,IS_MAP){_iterDefine(C,NAME,function(iterated,kind){this._t=_validateCollection(iterated,NAME);this._k=kind;this._l=undefined},function(){var that=this;var kind=that._k;var entry=that._l;while(entry&&entry.r)entry=entry.p;if(!that._t||!(that._l=entry=entry?entry.n:that._t._f)){that._t=undefined;return _iterStep(1)}if(kind=='keys')return _iterStep(0,entry.k);if(kind=='values')return _iterStep(0,entry.v);return _iterStep(0,[entry.k,entry.v])},IS_MAP?'entries':'values',!IS_MAP,true);_setSpecies(NAME)}};var _isArray=Array.isArray||function isArray(arg){return _cof(arg)=='Array'};var SPECIES$1=_wks('species');var _arraySpeciesConstructor=function(original){var C;if(_isArray(original)){C=original.constructor;if(typeof C=='function'&&(C===Array||_isArray(C.prototype)))C=undefined;if(_isObject(C)){C=C[SPECIES$1];if(C===null)C=undefined}}return C===undefined?Array:C};var _arraySpeciesCreate=function(original,length){return new(_arraySpeciesConstructor(original))(length)};var _arrayMethods=function(TYPE,$create){var IS_MAP=TYPE==1;var IS_FILTER=TYPE==2;var IS_SOME=TYPE==3;var IS_EVERY=TYPE==4;var IS_FIND_INDEX=TYPE==6;var NO_HOLES=TYPE==5||IS_FIND_INDEX;var create=$create||_arraySpeciesCreate;return function($this,callbackfn,that){var O=_toObject($this);var self=_iobject(O);var f=_ctx(callbackfn,that,3);var length=_toLength(self.length);var index=0;var result=IS_MAP?create($this,length):IS_FILTER?create($this,0):undefined;var val,res;for(;length>index;index++)if(NO_HOLES||index in self){val=self[index];res=f(val,index,O);if(TYPE){if(IS_MAP)result[index]=res;else if(res)switch(TYPE){case 3:return true;case 5:return val;case 6:return index;case 2:result.push(val)}else if(IS_EVERY)return false}}return IS_FIND_INDEX?-1:IS_SOME||IS_EVERY?IS_EVERY:result}};'use strict';var dP$2=_objectDp.f;var each=_arrayMethods(0);var _collection=function(NAME,wrapper,methods,common,IS_MAP,IS_WEAK){var Base=_global[NAME];var C=Base;var ADDER=IS_MAP?'set':'add';var proto=C&&C.prototype;var O={};if(!_descriptors||typeof C!='function'||!(IS_WEAK||proto.forEach&&!_fails(function(){new C().entries().next()}))){C=common.getConstructor(wrapper,NAME,IS_MAP,ADDER);_redefineAll(C.prototype,methods);_meta.NEED=true}else{C=wrapper(function(target,iterable){_anInstance(target,C,NAME,'_c');target._c=new Base();if(iterable!=undefined)_forOf(iterable,IS_MAP,target[ADDER],target)});each('add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON'.split(','),function(KEY){var IS_ADDER=KEY=='add'||KEY=='set';if(KEY in proto&&!(IS_WEAK&&KEY=='clear'))_hide(C.prototype,KEY,function(a,b){_anInstance(this,C,KEY);if(!IS_ADDER&&IS_WEAK&&!_isObject(a))return KEY=='get'?undefined:false;var result=this._c[KEY](a===0?0:a,b);return IS_ADDER?this:result})});IS_WEAK||dP$2(C.prototype,'size',{get:function(){return this._c.size}})}_setToStringTag(C,NAME);O[NAME]=C;_export(_export.G+_export.W+_export.F,O);if(!IS_WEAK)common.setStrong(C,NAME,IS_MAP);return C};'use strict';var MAP='Map';var es6_map=_collection(MAP,function(get){return function Map(){return get(this,arguments.length>0?arguments[0]:undefined)}},{get:function get(key){var entry=_collectionStrong.getEntry(_validateCollection(this,MAP),key);return entry&&entry.v},set:function set(key,value){return _collectionStrong.def(_validateCollection(this,MAP),key===0?0:key,value)}},_collectionStrong,true);var _arrayFromIterable=function(iter,ITERATOR){var result=[];_forOf(iter,false,result.push,result,ITERATOR);return result};var _collectionToJson=function(NAME){return function toJSON(){if(_classof(this)!=NAME)throw TypeError(NAME+"#toJSON isn't generic");return _arrayFromIterable(this)}};_export(_export.P+_export.R,'Map',{toJSON:_collectionToJson('Map')});'use strict';var _setCollectionOf=function(COLLECTION){_export(_export.S,COLLECTION,{of:function of(){var length=arguments.length;var A=new Array(length);while(length--)A[length]=arguments[length];return new this(A)}})};_setCollectionOf('Map');'use strict';var _setCollectionFrom=function(COLLECTION){_export(_export.S,COLLECTION,{from:function from(source){var mapFn=arguments[1];var mapping,A,n,cb;_aFunction(this);mapping=mapFn!==undefined;if(mapping)_aFunction(mapFn);if(source==undefined)return new this();A=[];if(mapping){n=0;cb=_ctx(mapFn,arguments[2],2);_forOf(source,false,function(nextItem){A.push(cb(nextItem,n++))})}else{_forOf(source,false,A.push,A)}return new this(A)}})};_setCollectionFrom('Map');var map$1=_core.Map;var map=createCommonjsModule(function(module){module.exports={"default":map$1,__esModule:true}});var _Map=unwrapExports(map);var classCallCheck=createCommonjsModule(function(module,exports){"use strict";exports.__esModule=true;exports.default=function(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}});var _classCallCheck=unwrapExports(classCallCheck);var createClass=createCommonjsModule(function(module,exports){"use strict";exports.__esModule=true;var _defineProperty2=_interopRequireDefault(defineProperty);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;(0,_defineProperty2.default)(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}()});var _createClass=unwrapExports(createClass);"use strict";var defaultParseOptions={decodeValues:true,map:false};function extend(target,source){return Object.keys(source).reduce(function(target,key){target[key]=source[key];return target},target)}function isNonEmptyString(str){return typeof str==="string"&&!!str.trim()}function parseString(setCookieValue,options){var parts=setCookieValue.split(";").filter(isNonEmptyString);var nameValue=parts.shift().split("=");var name=nameValue.shift();var value=nameValue.join("=");var cookie={name:name,value:options.decodeValues?decodeURIComponent(value):value};parts.forEach(function(part){var sides=part.split("=");var key=sides.shift().trimLeft().toLowerCase();var value=sides.join("=");if(key==="expires"){cookie.expires=new Date(value)}else if(key==="max-age"){cookie.maxAge=parseInt(value,10)}else if(key==="secure"){cookie.secure=true}else if(key==="httponly"){cookie.httpOnly=true}else if(key==="samesite"){cookie.sameSite=value}else{cookie[key]=value}});return cookie}function parse(input,options){if(!input){return[]}if(input.headers){input=input.headers["set-cookie"]||input.headers[Object.keys(input.headers).find(function(key){return key.toLowerCase()==="set-cookie"})]}if(!Array.isArray(input)){input=[input]}var defaultOptions=extend({},defaultParseOptions);if(options){options=extend(defaultOptions,options)}else{options=defaultOptions}if(!options.map){return input.filter(isNonEmptyString).map(function(str){return parseString(str,options)})}else{var cookies={};return input.filter(isNonEmptyString).reduce(function(cookies,str){var cookie=parseString(str,options);cookies[cookie.name]=cookie;return cookies},cookies)}}function splitCookiesString(cookiesString){if(Array.isArray(cookiesString)){return cookiesString}if(typeof cookiesString!=="string"){return[]}var cookiesStrings=[];var pos=0;var start;var ch;var lastComma;var nextStart;var cookiesSeparatorFound;function skipWhitespace(){while(pos<cookiesString.length&&/\s/.test(cookiesString.charAt(pos))){pos+=1}return pos<cookiesString.length}function notSpecialChar(){ch=cookiesString.charAt(pos);return ch!=="="&&ch!==";"&&ch!==","}while(pos<cookiesString.length){start=pos;cookiesSeparatorFound=false;while(skipWhitespace()){ch=cookiesString.charAt(pos);if(ch===","){lastComma=pos;pos+=1;skipWhitespace();nextStart=pos;while(pos<cookiesString.length&&notSpecialChar()){pos+=1}if(pos<cookiesString.length&&cookiesString.charAt(pos)==="="){cookiesSeparatorFound=true;pos=nextStart;cookiesStrings.push(cookiesString.substring(start,lastComma));start=pos}else{pos=lastComma+1}}else{pos+=1}}if(!cookiesSeparatorFound||pos>=cookiesString.length){cookiesStrings.push(cookiesString.substring(start,cookiesString.length))}}return cookiesStrings}var setCookie=parse;var parse_1=parse;var splitCookiesString_1=splitCookiesString;setCookie.parse=parse_1;setCookie.splitCookiesString=splitCookiesString_1;var Util=function(){function Util(){_classCallCheck(this,Util)}_createClass(Util,[{key:'getCookieScopeDomain',value:function getCookieScopeDomain(){var domain=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';if(!domain)return[];domain=domain.replace(/^\.+/ig,'');var scopes=domain.split('.').map(function(k){return['.',domain.slice(domain.indexOf(k))].join('')});return[domain].concat(scopes)}},{key:'normalizeDomain',value:function normalizeDomain(){var domain=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';return domain.replace(/^(\.*)?(?=\S)/ig,'.')}}]);return Util}();var util=new Util();var Cookie=function(){function Cookie(props){_classCallCheck(this,Cookie);this.name=props.name||'';this.value=props.value||'';this.domain=props.domain||'';this.path=props.path||'/';this.expires=props.expires?new Date(props.expires):null;this.maxAge=props.maxAge?parseInt(props.maxAge):null;this.httpOnly=!!props.httpOnly;this.dateTime=props.dateTime?new Date(props.dateTime):new Date()}_createClass(Cookie,[{key:'set',value:function set(){var setCookieStr=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';var cookie=setCookie.parse(setCookieStr,{decodeValues:false})[0];if(cookie){_Object$assign(this,cookie);this.dateTime=new Date()}return this}},{key:'merge',value:function merge(cookie){return _Object$assign(this,cookie)}},{key:'isExpired',value:function isExpired(){if(this.maxAge===0){return true}if(this.maxAge>0){var seconds=(Date.now()-this.dateTime.getTime())/1000;return seconds>this.maxAge}if(this.expires&&this.expires<new Date()){return true}return false}},{key:'isPersistence',value:function isPersistence(){return this.maxAge?this.maxAge>0:true}},{key:'isInDomain',value:function isInDomain(domain){var scopeDomains=util.getCookieScopeDomain(domain);return scopeDomains.indexOf(this.domain)>=0}},{key:'isInPath',value:function isInPath(path){return path.indexOf(this.path)===0||this.path.replace(/\/$/,'')===path}},{key:'toString',value:function toString(){return[this.name,this.value].join('=')}}]);return Cookie}();function getApi(){if(typeof my!=='undefined'){my.platform='my';return my}else if(typeof tt!=='undefined'){tt.platform='tt';return tt}else if(typeof swan!=='undefined'){swan.platform='swan';return swan}else if(typeof qq!=='undefined'){qq.platform='qq';return qq}else if(typeof wx!=='undefined'){wx.platform=typeof window!=='undefined'&&typeof location!=='undefined'?'h5':'wx';return wx}return{platform:'none'}}var api=getApi();var LocalStorage=function(){function LocalStorage(){_classCallCheck(this,LocalStorage)}_createClass(LocalStorage,[{key:'getItem',value:function getItem(key){if(api.platform==='my'){return api.getStorageSync({key:key}).data}return api.getStorageSync(key)}},{key:'setItem',value:function setItem(key,value){if(api.platform==='my'){return api.setStorageSync({key:key,data:value})}return api.setStorageSync(key,value)}}]);return LocalStorage}();var localStorage=new LocalStorage(api);var CookieStore=function(){function CookieStore(){_classCallCheck(this,CookieStore);this.__storageKey='__cookie_store__';this.__cookiesMap=this.__readFromStorage()||new _Map()}_createClass(CookieStore,[{key:'has',value:function has(name,domain,path){return this.getCookie(name,domain,path)!==undefined}},{key:'get',value:function get(){var name=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';var domain=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';var path=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'/';var cookie=this.getCookie(name,domain,path);return cookie?cookie.value:undefined}},{key:'set',value:function set(){var name=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';var value=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var domain=options.domain;if(!domain||!name)throw new Error('name 和 options.domain 值不正确！');var cookie=new Cookie(_Object$assign(options,{name:name,value:value}));var cookies=this.__cookiesMap.get(domain)||new _Map();cookies.set(name,cookie);this.__cookiesMap.set(domain,cookies);this.__saveToStorage();return cookie}},{key:'dir',value:function dir(){var dirObj={};var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=_getIterator(this.__cookiesMap.keys()),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var domain=_step.value;dirObj[domain]=this.getCookies(domain)}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError;}}}return dirObj}},{key:'remove',value:function remove(){var name=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';var domain=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';if(domain){var cookies=this.__cookiesMap.get(domain);cookies&&cookies.delete(name);cookies=this.__cookiesMap.get(util.normalizeDomain(domain));cookies&&cookies.delete(name)}else{var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=_getIterator(this.__cookiesMap.values()),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var _cookies=_step2.value;_cookies.delete(name)}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2.return){_iterator2.return()}}finally{if(_didIteratorError2){throw _iteratorError2;}}}}this.__saveToStorage();return true}},{key:'getCookie',value:function getCookie(){var name=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';var domain=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';var path=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'/';var cookie=void 0;var scopeDomains=util.getCookieScopeDomain(domain);var _iteratorNormalCompletion3=true;var _didIteratorError3=false;var _iteratorError3=undefined;try{for(var _iterator3=_getIterator(this.__cookiesMap.entries()),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=true){var _step3$value=_slicedToArray(_step3.value,2),key=_step3$value[0],cookies=_step3$value[1];if(domain&&scopeDomains.indexOf(key)<0)continue;cookie=cookies.get(name);if(cookie&&cookie.isInPath(path)&&!cookie.isExpired())break;cookie=undefined}}catch(err){_didIteratorError3=true;_iteratorError3=err}finally{try{if(!_iteratorNormalCompletion3&&_iterator3.return){_iterator3.return()}}finally{if(_didIteratorError3){throw _iteratorError3;}}}return cookie}},{key:'getCookies',value:function getCookies(domain,path){var cookieValues={};this.getCookiesArray(domain,path).forEach(function(cookie){cookieValues[cookie.name]=cookie.value});return cookieValues}},{key:'getCookiesArray',value:function getCookiesArray(){var domain=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';var path=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'/';var cookiesArr=[];var scopeDomains=util.getCookieScopeDomain(domain);var _iteratorNormalCompletion4=true;var _didIteratorError4=false;var _iteratorError4=undefined;try{for(var _iterator4=_getIterator(this.__cookiesMap.entries()),_step4;!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=true){var _step4$value=_slicedToArray(_step4.value,2),key=_step4$value[0],cookies=_step4$value[1];if(domain&&scopeDomains.indexOf(key)<0)continue;var _iteratorNormalCompletion5=true;var _didIteratorError5=false;var _iteratorError5=undefined;try{for(var _iterator5=_getIterator(cookies.values()),_step5;!(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done);_iteratorNormalCompletion5=true){var cookie=_step5.value;if(cookie.isInPath(path)&&!cookie.isExpired()){cookiesArr.push(cookie)}}}catch(err){_didIteratorError5=true;_iteratorError5=err}finally{try{if(!_iteratorNormalCompletion5&&_iterator5.return){_iterator5.return()}}finally{if(_didIteratorError5){throw _iteratorError5;}}}}}catch(err){_didIteratorError4=true;_iteratorError4=err}finally{try{if(!_iteratorNormalCompletion4&&_iterator4.return){_iterator4.return()}}finally{if(_didIteratorError4){throw _iteratorError4;}}}return cookiesArr}},{key:'setCookiesArray',value:function setCookiesArray(){var _this=this;var cookies=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];this.__cookiesMap=this.__cookiesMap||new _Map();cookies.forEach(function(cookie){var cookieMap=_this.__cookiesMap.get(cookie.domain);if(!cookieMap){cookieMap=new _Map();_this.__cookiesMap.set(cookie.domain,cookieMap)}cookieMap.set(cookie.name,cookie)});this.__saveToStorage();return this.__cookiesMap}},{key:'clearCookies',value:function clearCookies(domain){if(domain){var cookies=this.__cookiesMap.get(domain);cookies&&cookies.clear()}else{this.__cookiesMap.clear()}this.__saveToStorage();return true}},{key:'getRequestCookies',value:function getRequestCookies(domain,path){var cookiesArr=this.getCookiesArray(domain,path);return this.stringify(cookiesArr)}},{key:'setResponseCookies',value:function setResponseCookies(setCookieStr,domain){var parsedCookies=this.parse(setCookieStr,domain);return this.setCookiesArray(parsedCookies)}},{key:'parse',value:function parse(){var setCookieStr=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';var domain=arguments[1];var cookies=setCookie.parse(setCookie.splitCookiesString(setCookieStr),{decodeValues:false});return cookies.map(function(item){item.domain=util.normalizeDomain(item.domain)||domain;return new Cookie(item)})}},{key:'stringify',value:function stringify(cookies){return cookies.map(function(item){return item.toString()}).join('; ')}},{key:'__saveToStorage',value:function __saveToStorage(){try{var saveCookies=[];var _iteratorNormalCompletion6=true;var _didIteratorError6=false;var _iteratorError6=undefined;try{for(var _iterator6=_getIterator(this.__cookiesMap.values()),_step6;!(_iteratorNormalCompletion6=(_step6=_iterator6.next()).done);_iteratorNormalCompletion6=true){var cookies=_step6.value;var _iteratorNormalCompletion7=true;var _didIteratorError7=false;var _iteratorError7=undefined;try{for(var _iterator7=_getIterator(cookies.values()),_step7;!(_iteratorNormalCompletion7=(_step7=_iterator7.next()).done);_iteratorNormalCompletion7=true){var cookie=_step7.value;if(cookie.isExpired()){cookies.delete(cookie.name)}else if(cookie.isPersistence()){saveCookies.push(cookie)}}}catch(err){_didIteratorError7=true;_iteratorError7=err}finally{try{if(!_iteratorNormalCompletion7&&_iterator7.return){_iterator7.return()}}finally{if(_didIteratorError7){throw _iteratorError7;}}}}}catch(err){_didIteratorError6=true;_iteratorError6=err}finally{try{if(!_iteratorNormalCompletion6&&_iterator6.return){_iterator6.return()}}finally{if(_didIteratorError6){throw _iteratorError6;}}}localStorage.setItem(this.__storageKey,saveCookies)}catch(err){console.warn('Cookie 存储异常：',err)}}},{key:'__readFromStorage',value:function __readFromStorage(){try{var cookies=localStorage.getItem(this.__storageKey)||[];cookies=cookies.map(function(item){return new Cookie(item)});return this.setCookiesArray(cookies)}catch(err){console.warn('Cookie 读取异常：',err)}}}]);return CookieStore}();var cookieStore=function(){var cookieStore=new CookieStore();function cookieRequestProxy(options){options.cookie=options.cookie===undefined||!!options.cookie;options.dataType=options.dataType||'json';options.header=options.headers=options.header||options.headers||{};options.header['X-Requested-With']='XMLHttpRequest';if(options.dataType==='json'){options.header['Accept']='application/json, text/plain, */*'}if(api.platform!=='h5'&&options.cookie){var domain=(options.url||'').split('/')[2];var path=options.url.split(domain).pop();var requestCookies=cookieStore.getRequestCookies(domain,path);options.header['Cookie']=requestCookies;var successCallback=options.success;options.success=function(response){response.header=response.header||response.headers;var responseCookies=response.header?response.header['Set-Cookie']||response.header['set-cookie']:'';if(responseCookies){responseCookies=responseCookies.replace(/\;([^\s\;]*?(?=\=))/ig,',$1');cookieStore.setResponseCookies(responseCookies,domain)}successCallback&&successCallback(response)}}return this(options)}var requestProxy=cookieRequestProxy.bind(api.request);var uploadFileProxy=cookieRequestProxy.bind(api.uploadFile);var downloadFileProxy=cookieRequestProxy.bind(api.downloadFile);try{_Object$defineProperties(api,{requestWithCookie:{value:requestProxy},uploadFileWithCookie:{value:uploadFileProxy},downloadFileWithCookie:{value:downloadFileProxy}});_Object$defineProperties(api,{request:{value:requestProxy},uploadFile:{value:uploadFileProxy},downloadFile:{value:downloadFileProxy}})}catch(err){console.error('weapp-cookie: ',err)}cookieStore.config=function(options){options=_Object$assign({requestAlias:'requestWithCookie',uploadFileAlias:'uploadFileWithCookie',downloadFileAlias:'downloadFileWithCookie'},options);if(options.requestAlias){_Object$defineProperty(api,options.requestAlias,{value:requestProxy})}if(options.uploadFileAlias){_Object$defineProperty(api,options.uploadFileAlias,{value:uploadFileProxy})}if(options.downloadFileAlias){_Object$defineProperty(api,options.downloadFileAlias,{value:downloadFileProxy})}};return cookieStore}();return cookieStore})));